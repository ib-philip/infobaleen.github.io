<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        <title>Import Files - Documentation</title>
        <link href="../../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../../../custom/extra.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../../..">Documentation</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../../../..">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Analytics <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../Analytics/Dashboards/">Dashboards</a>
</li>
                                    
<li >
    <a href="../../../Analytics/Customer-Insights/">Customer Insights</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Segmentations <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../Segmentations/Auto-targeting/">Auto-targeting</a>
</li>
                                    
<li >
    <a href="../../../Segmentations/Clustering/">Clustering</a>
</li>
                                </ul>
                            </li>
                            <li >
                                <a href="../../../Recommendations/Recommendations/">Recommendations</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Menu <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">Account</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../Account/API-Keys/">API Keys</a>
</li>
            
<li >
    <a href="../../Account/Logout/">Logout</a>
</li>
            
<li >
    <a href="../../Account/Users/">Users</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Admin</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../Admin/Clear-CH-chache/">Clear CH chache</a>
</li>
            
<li >
    <a href="../../Admin/Configuration/">Configuration</a>
</li>
            
<li >
    <a href="../../Admin/Connections/">Connections</a>
</li>
            
<li >
    <a href="../../Admin/Events/">Events</a>
</li>
            
<li >
    <a href="../../Admin/Secrets/">Secrets</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Documentation</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../Documentation/Agent/">Agent</a>
</li>
            
<li >
    <a href="../../Documentation/Recommendations/">Recommendations API</a>
</li>
            
<li >
    <a href="../../Documentation/New-Issue/">New Issue</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Manage Data</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../Data-Models/">Data Models</a>
</li>
            
<li class="active">
    <a href="./">Import Files</a>
</li>
            
<li >
    <a href="../Results/">Results</a>
</li>
            
<li >
    <a href="../Sources/">Sources</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Model</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../Model/Interactions/">Interactions</a>
</li>
            
<li >
    <a href="../../Model/Overview/">Overview</a>
</li>
            
<li >
    <a href="../../Model/Products/">Products</a>
</li>
            
<li >
    <a href="../../Model/Users/">Users</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../Other/Overlaps/">Other</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../Data-Models/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../Results/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#import-data-to-the-platform">Import data to the platform</a></li>
            <li><a href="#using-a-database-connection-for-centra-voyado-etc">Using a database connection (for Centra, Voyado, etc)</a></li>
            <li><a href="#using-a-file">Using a file</a></li>
            <li><a href="#using-a-feed">Using a feed</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="import-data-to-the-platform">Import data to the platform</h1>
<p>There are various ways to import data to the platform, here we present the most common use cases.</p>
<h2 id="using-a-database-connection-for-centra-voyado-etc">Using a database connection (for Centra, Voyado, etc)</h2>
<p>First, make sure you know the origin files to fetch. If files are fetched from </p>
<p>Go to the platform and then to <code>Admin -&gt; Configuration</code> (can be found at the top right menu by clicking the three dots, see example image below).</p>
<h3 id="set-up-a-configuration">Set up a configuration</h3>
<p>Add a database and name the <code>Database</code> based on the what system they use (centra, voyado, etc), and choose the matching <code>Driver</code>. In the <code>Config</code> field, check the standard URL provided by the corresponding ecommerce platform. </p>
<p><strong>Notes:</strong>
<em> A key or token is needed to access the databases. This key is listed under <code>Admin -&gt; Secrets</code>. 
</em> For <strong>Centra</strong> customers there are fields that need to be specified:
    * <code>"Limit":100000</code> : This is a limit so that we do not overload Centra servers when fetching data
    * <code>"Store":1,"Market":3,"PriceList":19,"Warehouses":[2,3]</code>: These are specifications to fetch the correct data, the customer seldom knows this but Centra should have the information. 
<em> For <strong>Voyado</strong> customers there are fields that need to be specified:
    * <code>"Directories"</code>: These are the directories that can be found in the <a href="(#find-voyado-files-to-import)">Azure data lake</a>
    * There are defauly directories that will be accessible without specifying them, these are <code>store/</code>, <code>receiptItems/</code>, <code>article/</code> and <code>allContacts/</code>
</em> There is an option also to <code>Add Integration</code>. This part can be skipped, it is only used when we send data to customers. </p>
<h3 id="make-arbitrary-query">Make arbitrary query</h3>
<p>Create a source and make an arbitrary query similar to <code>SELECT * FROM `users.gz`</code> for Centra. You can list possible paths by using <code>SELECT * FROM `*`</code>. </p>
<p>This will trigger a proxy sync, and if a Centra customer the <code>.gz</code> files will appear once completed. This normally takes 1-5 hours.</p>
<p><img width="1198" alt="Screenshot 2022-05-10 at 10 31 03" src="https://user-images.githubusercontent.com/4352260/167585099-4bbcfd77-008e-455d-93bf-89e257d6b306.png"></p>
<h3 id="how-to-verify-that-the-sync-works">How to verify that the sync works?</h3>
<p>Choose the source you created and press the pen to edit it. Go to the <code>ADD QUERY</code> tab and choose <code>“SELECT * FROM `*`”</code>. </p>
<p>If the sync is ready, you will see a list of files to choose from, for example, <code>users.gz</code>, <code>items.gz</code>, <code>interactions.gz</code>, see image below. If you see the files imported you are now ready to <a href="https://github.com/infobaleen/customer-success/blob/main/Documentation/Platform/Menu/Manage%20Data/Sources.md">create sources!</a></p>
<p><img width="954" alt="Screenshot 2022-05-10 at 14 59 33" src="https://user-images.githubusercontent.com/4352260/167635009-bee5c795-271c-49f9-a92c-840a415f120f.png"></p>
<h2 id="using-a-file">Using a file</h2>
<p>Go to the platform and then to <code>Manage data -&gt; Import files</code> (can be found at the top right menu by clicking the three dots, see example image below). </p>
<p>If the customer sent their data in a csv-file, drag it to the drop box for importing files.</p>
<p>Uploaded files are available from the "imports (csv-fs)" database connection when creating new sources (see next step).</p>
<p><img width="1216" alt="Screenshot 2022-05-10 at 10 31 52" src="https://user-images.githubusercontent.com/4352260/167585247-b7f840a9-a43a-4a7d-bf76-1757e4f688cb.png"></p>
<h2 id="using-a-feed">Using a feed</h2>
<p>A feed is a file that contains a list of products that often is used to advertise through Google Merchant Center. Often these feeds are updated with latest information which means Infobaleen can use the feed to add relevant product details to the platform, such as image link data.</p>
<p>Feeds are most often published as a public URL in format <code>.xml</code>, see below an example:</p>
<p><img width="842" alt="Screenshot 2022-06-03 at 15 59 39" src="https://user-images.githubusercontent.com/4352260/171869182-84200505-15de-48e9-a099-d5ed04c8bdca.png"></p>
<h3 id="adding-a-feed-as-a-data-source">Adding a feed as a data source</h3>
<ol>
<li>Get the public URL of the feed</li>
<li>Add a new <code>source</code>, often it is a good idea to add a "Merge Filter" to avoid fetching too much data (you can for example add <code>now() &lt; toFloat(last_seen) + 7*24*3600</code>)</li>
<li>Add a query similar to below and also add <code>decoder=head</code> in the field <code>Preprocessor directives</code> to show the file structure. Note that you have to write <code>url:</code> before <code>https://</code>, see example below</li>
</ol>
<pre><code>SELECT
    *
FROM `url:https://shop.com/plugin-export/shoppingfeed/se`  
</code></pre>

<p>[Note that you have to write <strong>url:</strong> before https://]  </p>
<h3 id="preprocessor-directives">Preprocessor directives</h3>
<p>Start by writing <code>decoder=xml</code> (or <code>=feed</code>)</p>
<p>to show the file structure, in this case it looks like this.</p>
<p><img alt="image" src="https://user-images.githubusercontent.com/102239423/169991270-10e97b4e-b5fd-4df8-968c-320119f9ee71.png" /></p>
<p><strong>decoder:</strong> describes what file format, xml, csv, json etc.<br />
<strong>root:</strong> navigates the file and shows where you want to read data.<br />
<strong>rowtag:</strong> selects the object.<br />
<strong>pluck:</strong> inside your rowtag you can have multiple data columns, pluck lets you choose wich you want to get.  </p>
<p>Below is one example with <code>root=feed.channel</code> and one example with <code>root=rss.channel</code>:</p>
<p><img width="543" alt="Screenshot 2022-06-10 at 08 26 05" src="https://user-images.githubusercontent.com/4352260/173004337-734dcc11-992c-4920-975b-3d87f5ad362d.png">
<img width="549" alt="Screenshot 2022-06-10 at 08 26 46" src="https://user-images.githubusercontent.com/4352260/173004348-827d98b1-e609-4d09-aa5f-63ce9034443e.png"></p>
<p>In the first image example, the resulting preprocessing directives to fetch the feed are:  </p>
<p><code>decoder=xml</code><br />
<code>root=rss.channel</code><br />
<code>rowtag=item</code><br />
<code>pluck=google_product_category,price</code><br />
resulting in this outcome
<img alt="image" src="https://user-images.githubusercontent.com/102239423/169994099-991016fc-cdb8-4e63-a60a-83726a1f7e87.png" /></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../../../js/base.js" defer></script>
        <script src="../../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
